Persistent Memory Development Kit

This is utils/ansible/README.

Ansible playbooks in this directory let user configure platforms to be used as tests runners.
User can install packages for openSUSE and Rocky Linux using those playbooks and also configure provisioning for DIMMs and Namespaces.

To use playbooks it is required to install Ansible first. It must be done on computer that will be used to execute script, not on target platform.

Commands:
'ansible-playbook -i <target_platform_ip_address>, opensuseAnsible.yml --extra-vars "host=all ansible_user=root ansible_password=<password_for_root_on_target>"'
'ansible-playbook -i <target_platform_ip_address>, rockyAnsible.yml --extra-vars "host=all ansible_user=root ansible_password=<password_for_root_on_target>"'
Those commands above will install required packages to build PMDK tests.

'ansible-playbook -i <target_platform_ip_address>, configureProvisioning.yml --extra-vars "host=all ansible_user=root ansible_password=<password_for_root_on_target>"'
This command will configure regions and namespaces on DIMMs.

NOTE:

- If platform does not have DIMM's regions configured earlier you can add additional var for configureProvisioning.yml playbook: newRegions=true eg. 
'ansible-playbook -i <target_platform_ip_address>, configureProvisioning.yml --extra-vars "host=all ansible_user=root ansible_password=<password_for_root> newRegions=true"'

Configured regions are required to create namespaces on the DIMMs.

- If Linux kernel is outdated, opensuseAnsible and rockyAnsible playbooks will reboot target platform.

- It is possible to run playbooks inside target platform but if notes above occurs then you need to rerun this playbook.

To run playbooks inside the runner please comment line:

' - hosts: "{{ host }}"'

and uncomment

' # - hosts: localhost
  # - connection: local'